window.bricksUtils&&(window.bricksUtils.updateLiveSearchTerm=function(e,t){document.querySelectorAll(`span[data-brx-ls-term="${e}"]`).forEach((e=>{e.innerHTML=t}))},window.bricksUtils.hideLiveSearchWrapper=function(e){document.querySelectorAll(`[data-brx-ls-wrapper="${e}"]`).forEach((e=>{e.classList.remove("brx-ls-active")}))},window.bricksUtils.showLiveSearchWrapper=function(e){document.querySelectorAll(`[data-brx-ls-wrapper="${e}"]`).forEach((e=>{e.classList.add("brx-ls-active")}))},window.bricksUtils.getPageNumberFromUrl=function(e){let t=1;const r=new URL(e);if(r.searchParams.has("paged"))t=parseInt(r.searchParams.get("paged"));else{const e=r.pathname.split("/").filter((e=>""!==e));t=e[e.length-1],isNaN(t)&&(t=1)}return t=parseInt(t),t},window.bricksUtils.updateSelectedFilters=function(e,t,r=!1){const i=t.filterId||!1;if(!i||!e||!window.bricksData.queryLoopInstances[e])return;const n=window.bricksData.queryLoopInstances[e]?.isLiveSearch||!1;window.bricksData.selectedFilters[e]||(window.bricksData.selectedFilters[e]={});let a=r||window.location.origin+window.location.pathname;const s=e=>""===e.currentValue||0===e.currentValue&&"pagination"===e.filterType||Array.isArray(e.currentValue)&&0===e.currentValue.length||"range"===e.filterType&&JSON.stringify(e.currentValue)===JSON.stringify([e.min,e.max]),c=e=>{if(!window.bricksData.selectedFilters[e])return;let t={},r=0;Object.keys(window.bricksData.selectedFilters[e]).forEach((i=>{const n=window.bricksData.selectedFilters[e][i];t[r]=n,r++})),window.bricksData.selectedFilters[e]=t};if(s(t))Object.keys(window.bricksData.selectedFilters[e]).forEach((t=>{if(window.bricksData.selectedFilters[e][t]===i){delete window.bricksData.selectedFilters[e][t];const r=window.bricksData.filterInstances[i]||!1;r&&"pagination"===r.filterType&&(a=a.replace(/\/page\/[0-9]+/g,""))}})),c(e);else{if(!Object.values(window.bricksData.selectedFilters[e]).includes(i)){let t=Object.keys(window.bricksData.selectedFilters[e]).length;window.bricksData.selectedFilters[e][t]=i}}if("pagination"!==t.filterType&&window.bricksData.selectedFilters[e]){let t=!1;Object.keys(window.bricksData.selectedFilters[e]).forEach((r=>{const i=window.bricksData.selectedFilters[e][r],n=window.bricksData.filterInstances[i]||!1;n&&"pagination"===n.filterType&&(delete window.bricksData.selectedFilters[e][r],bricksUtils.resetFilterValue(n),t=!0)})),c(e),t&&!n&&(a=a.replace(/\/page\/[0-9]+/g,""))}if("apply"===t.filterType){window.bricksData.selectedFilters[e]={},bricksUtils.getFiltersForQuery(e).forEach((t=>{if(s(t))return;if(!Object.values(window.bricksData.selectedFilters[e]).includes(t.filterId)){let r=Object.keys(window.bricksData.selectedFilters[e]).length;window.bricksData.selectedFilters[e][r]=t.filterId}}))}if("reset"===t.filterType&&(window.bricksData.selectedFilters[e]={}),n)a=window.location.href;else{let t=bricksUtils.buildFilterUrlParams(e);a=t?`${a}?${t}`:a}bricksUtils.updatePushState(e,a)},window.bricksUtils.resetFilterValue=function(e,t=!1){const r=e.filterType,i=e.filterElement,n=e.originalValue,a=e.targetQueryId;switch(r){case"search":i.value=n,e.currentValue=n;const r=i.nextElementSibling||!1;r&&(""===n?r.classList.remove("brx-show"):r.classList.add("brx-show")),bricksUtils.updateLiveSearchTerm(a,n);break;case"select":i.value=n,e.currentValue=n;break;case"pagination":e.currentValue=n;break;case"radio":i.value=n,e.currentValue=n;i.querySelectorAll("input").forEach((e=>{e.value!==n?e.checked=!1:e.checked=!0}));break;case"checkbox":const s=(e,t)=>{e.forEach((e=>{e.checked=t.has(e.value)}))};if(!1!==t){e.currentValue=e.currentValue.filter((e=>e!==t));s(i.querySelectorAll("input"),new Set([t]))}else{e.currentValue=[...n];s(i.querySelectorAll("input"),new Set(n))}break;case"datepicker":const c=e.datepicker||!1;if(!c)return;c.clear(),c.setDate(n,!1),e.currentValue=n;break;case"range":e.currentValue=[...n]}},window.bricksUtils.buildFilterUrlParams=function(e){let t=new URLSearchParams,r=new URLSearchParams(window.location.search),i={};return r.forEach(((e,t)=>{let r=t.replace(/\[.*?\]/g,"[]");r=r.replace("[]",""),r.includes("brx_")||window.bricksData.filterNiceNames.includes(r)||(i[t]=e)})),Object.keys(i).forEach((e=>{t.append(e,i[e])})),Object.keys(window.bricksData.selectedFilters[e]).length>0&&Object.keys(window.bricksData.selectedFilters[e]).forEach((r=>{const i=window.bricksData.selectedFilters[e][r],n=window.bricksData.filterInstances[i]||!1;if(!n)return;let a=n.currentValue,s=n.filterNiceName||`brx_${i}`;""===a||Array.isArray(a)&&0===a.length||"pagination"!==n.filterType&&(Array.isArray(a)?(s=`${s}[]`,a.forEach((e=>{t.append(s,e)}))):t.append(s,a))})),t.toString()??""},window.bricksUtils.updatePushState=function(e,t){if(!e||!t)return;let r={};bricksUtils.currentPageTargetQueryIds().forEach((e=>{r[e]={},bricksUtils.getFiltersForQuery(e).forEach((t=>{r[e][t.filterId]=t.currentValue}))}));let i=window.bricksData.selectedFilters;window.history.pushState({isBricksFilter:!0,targetQueryId:e,selectedFilters:i,instancesValue:r},"",t)},window.bricksUtils.getFiltersForQuery=function(e,t=!1){if(!window.bricksData.filterInstances||Object.keys(window.bricksData.filterInstances).length<1)return[];const r=Object.values(window.bricksData.filterInstances).filter((t=>t.targetQueryId===e))||[];return t?r.map((e=>e[t])):r},window.bricksUtils.currentPageTargetQueryIds=function(){if(!window.bricksData.filterInstances||Object.keys(window.bricksData.filterInstances).length<1)return[];return Object.values(window.bricksData.filterInstances).reduce(((e,t)=>(e.includes(t.targetQueryId)||e.push(t.targetQueryId),e)),[])},window.bricksUtils.getSelectedFiltersForQuery=function(e){if(!window.bricksData.selectedFilters||!window.bricksData.selectedFilters[e]||!window.bricksData.filterInstances||Object.keys(window.bricksData.filterInstances).length<1)return[];return Object.values(window.bricksData.selectedFilters[e]).reduce(((e,t)=>{let r=window.bricksData.filterInstances[t]||!1;return r&&(e[r.filterId]=r.currentValue),e}),{})},window.bricksUtils.fetchFilterResults=function(e,t=!1){e&&window.bricksData.queryLoopInstances[e]&&bricksGetQueryResult(e,t).then((t=>{bricksDisplayQueryResult(e,t)})).catch((t=>{window.bricksData.queryLoopInstances[e].xhrAborted||console.log("bricksGetQueryResult:error",t)}))});const bricksFiltersFn=new BricksFunction({parentNode:document,selector:"[data-brx-filter]",frontEndOnly:!0,eachElement:e=>{const t=JSON.parse(e.dataset?.brxFilter)||!1;if(!t)return;const r=t?.filterId||!1,i=t?.targetQueryId||!1,n=t?.filterType||!1,a=t?.filterAction||!1,s=t?.filterNiceName||"";if(r&&i&&n&&a){if(window.bricksData.filterInstances||(window.bricksData.filterInstances={}),!window.bricksData.filterInstances[r]){switch(t.filterElement=e,t.currentValue="",t.originalValue="",n){case"search":case"select":e.value&&(t.currentValue=e.value);break;case"reset":case"apply":case"active-filters":break;case"radio":let n=e.querySelector("input:checked");n&&(t.currentValue=n.value);break;case"checkbox":const a=e.querySelectorAll("input:checked");if(a.length){let e=Array.from(a).map((e=>e.value));t.currentValue=e}else t.currentValue=[];t.originalValue=[];break;case"pagination":const s=bricksUtils.getPageNumberFromUrl(window.location.href);if(t.currentValue=s,s>1){window.bricksData.selectedFilters[i]||(window.bricksData.selectedFilters[i]={});if(!Object.values(window.bricksData.selectedFilters[i]).includes(r)){let e=Object.keys(window.bricksData.selectedFilters[i]).length;window.bricksData.selectedFilters[i][e]=r}}break;case"datepicker":let c=e.dataset.bricksDatepickerOptions||!1;c&&(c=JSON.parse(c),c.defaultDate&&(Array.isArray(c.defaultDate)&&(c.defaultDate=c.defaultDate.join(",")),t.currentValue=c.defaultDate));break;case"range":const l=e.querySelector('input.min[type="number"]')||0,o=e.querySelector('input.max[type="number"]')||0;let u=[t.min,t.max];l&&(u[0]=parseInt(l.value)),o&&(u[1]=parseInt(o.value)),t.currentValue=[...u],t.originalValue=[t.min,t.max]}window.bricksData.filterInstances[r]=t,""!==s&&window.bricksData.filterNiceNames&&!window.bricksData.filterNiceNames.includes(s)&&window.bricksData.filterNiceNames.push(s)}e.dataset.brxFilter=!0}}});function bricksFilters(){bricksFiltersFn.run()}const bricksSearchFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-search input[data-brx-filter]",frontEndOnly:!0,eachElement:e=>{const t=Object.values(window.bricksData.filterInstances).find((t=>t.filterElement===e))||!1;if(!t)return;const r=t?.targetQueryId||!1,i=t?.filterMethod||"ajax",n=t?.filterApplyOn||"change",a=t?.filterInputDebounce||500,s=t?.filterMinChars||3;if("ajax"===i){const i=t=>{const r=e.nextElementSibling||!1;r&&(""===t?r.classList.remove("brx-show"):r.classList.add("brx-show"))},c=a=>{const c=e.value,l="Enter"===a.key;if(i(c),!l&&c===t.currentValue)return;t.currentValue=c;const o=window.bricksData.queryLoopInstances[r]||!1;o&&(o?.isLiveSearch&&""===c?bricksUtils.hideLiveSearchWrapper(r):!l&&c.length&&c.length<s||(l||r&&"click"!==n)&&(bricksUtils.updateLiveSearchTerm(r,c),bricksUtils.updateSelectedFilters(r,t),bricksUtils.fetchFilterResults(r)))};"change"===n?(e.addEventListener("keyup",(()=>bricksUtils.maybeAbortXhr(r))),e.addEventListener("keyup",bricksUtils.debounce(c,a))):(e.addEventListener("input",c),e.addEventListener("keyup",(e=>{"Enter"===e.key&&c(e)}))),e.addEventListener("focus",(e=>{const t=e.target.value,i=window.bricksData.queryLoopInstances[r]||!1;i&&i?.isLiveSearch&&""!==t&&bricksUtils.showLiveSearchWrapper(r)}));const l=e.nextElementSibling||!1;if(!l)return;if(!l.classList.contains("icon"))return;const o=t=>{t.preventDefault(),e.value="",e.focus(),c(new KeyboardEvent("keyup",{key:"Enter"}))};l.addEventListener("click",(e=>o(e))),l.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||o(e)}))}}});function bricksSearchFilter(){bricksSearchFilterFn.run()}const bricksSelectFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-select[data-brx-filter]",frontEndOnly:!0,eachElement:e=>{const t=Object.values(window.bricksData.filterInstances).find((t=>t.filterElement===e))||!1;if(!t)return;const r=t?.targetQueryId||!1,i=t?.filterMethod||"ajax",n=t?.filterApplyOn||"change";r&&"ajax"===i&&e.addEventListener("change",(function(e){const i=e.target.value;if(i===t.currentValue)return;if(t.currentValue=i,"change"!==n)return;window.bricksData.queryLoopInstances[r]&&(bricksUtils.updateSelectedFilters(r,t),bricksUtils.fetchFilterResults(r))}))}});function bricksSelectFilter(){bricksSelectFilterFn.run()}const bricksRadioFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-radio[data-brx-filter] input",frontEndOnly:!0,eachElement:e=>{const t=e.closest("[data-brx-filter]")||!1;if(!t)return;const r=Object.values(window.bricksData.filterInstances).find((e=>e.filterElement===t))||!1;if(!r)return;const i=r?.targetQueryId||!1,n=r?.filterMethod||"ajax",a=r?.filterApplyOn||"change";if(i&&(e.addEventListener("keydown",(function(e){if("ArrowDown"===e.key||"ArrowUp"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key){e.preventDefault();let t=e.target.closest("li");if("ArrowDown"===e.key||"ArrowRight"===e.key){let e=t.nextElementSibling;for(;e&&e.querySelector("input")&&e.querySelector("input").disabled;)e=e.nextElementSibling;e&&e.querySelector("input")&&e.querySelector("input").focus()}else if("ArrowUp"===e.key||"ArrowLeft"===e.key){let e=t.previousElementSibling;for(;e&&e.querySelector("input")&&e.querySelector("input").disabled;)e=e.previousElementSibling;e&&e.querySelector("input")&&e.querySelector("input").focus()}}})),"ajax"===n)){const n=()=>{const e=t.querySelectorAll(".brx-option-active")||!1;e&&e.forEach((e=>{e.classList.remove("brx-option-active")}));const r=t.querySelector("input:checked")||!1;if(r){const e=r.closest("li")||!1;e&&e.classList.add("brx-option-active");const t=r.closest("label")||!1;t&&t.classList.add("brx-option-active");const i=r.nextElementSibling||!1;i&&(i.focus(),i.classList.add("brx-option-active"))}};e.addEventListener("click",(function(i){if(r.currentValue===e.value){if(""===e.value)return;const i=t.querySelectorAll("input")||!1;i&&i.forEach((e=>{e.removeAttribute("checked")}));let n=t.querySelector('input[value=""]')||!1;n&&(n.checked=!0,n.setAttribute("checked","checked")),e.checked=!1,e.removeAttribute("checked"),r.currentValue="",e.dispatchEvent(new Event("change"),{bubbles:!0})}else{(t.querySelectorAll("input")||!1).forEach((t=>{t!==e&&t.removeAttribute("checked")})),e.checked=!0,e.setAttribute("checked","checked"),r.currentValue=e.value}n()})),"change"===a&&e.addEventListener("change",(function(e){window.bricksData.queryLoopInstances[i]&&(bricksUtils.updateSelectedFilters(i,r),bricksUtils.fetchFilterResults(i))}))}}});function bricksRadioFilter(){bricksRadioFilterFn.run()}const bricksRangeFilterFn=new BricksFunction({parentNode:document,selector:'.brxe-filter-range[data-brx-filter] input[type="number"]',frontEndOnly:!0,eachElement:e=>{const t=e.closest("[data-brx-filter]")||!1;if(!t)return;const r=Object.values(window.bricksData.filterInstances).find((e=>e.filterElement===t))||!1;if(!r)return;const i=r?.targetQueryId||!1,n=r?.filterMethod||"ajax",a=r?.filterApplyOn||"change";i&&"ajax"===n&&e.addEventListener("change",(function(n){const s=e.classList.contains("min")?"min":"max";let c="min"===s?e.value:t.querySelector('input.min[type="number"]').value||0,l="max"===s?e.value:t.querySelector('input.max[type="number"]').value||0;if(c=parseInt(c),l=parseInt(l),isNaN(c)||isNaN(l))return;c>l&&("min"===s?(c=l,e.value=c):(l=c,e.value=l)),c<r.min?(c=r.min,e.value=c):c>r.max&&(c=r.max,e.value=c);let o=[c,l];if(o===r.currentValue)return;if(r.currentValue=[...o],"change"!==a)return;window.bricksData.queryLoopInstances[i]&&(bricksUtils.updateSelectedFilters(i,r),bricksUtils.fetchFilterResults(i))}))}});function bricksRangeFilter(){bricksRangeFilterFn.run()}function bricksRangeValueUpdater(){document.addEventListener("bricks/ajax/query_result/displayed",(function(e){const t=e.detail.queryId||!1;if(!t)return;const r=bricksUtils.getFiltersForQuery(t).filter((e=>"range"===e.filterType));r.length>0&&r.forEach((e=>{const t=e.filterElement,r=t.querySelector('input.min[type="number"]'),i=t.querySelector('input.max[type="number"]');if(!r||!i)return;const n=parseInt(r.value)||0,a=parseInt(i.value)||0;e.currentValue=[n,a]}))}))}const bricksRangeSliderUIFn=new BricksFunction({parentNode:document,selector:'.brxe-filter-range[data-brx-filter] input[type="range"]',frontEndOnly:!0,eachElement:e=>{const t=e.closest("[data-brx-filter]")||!1;if(!t)return;const r=Object.values(window.bricksData.filterInstances).find((e=>e.filterElement===t))||!1;if(!r)return;const i="rtl"===document.dir||"rtl"===document.documentElement.dir,n=t.querySelector('input.max[type="range"]'),a=t.querySelector('input.min[type="range"]'),s=(e,i)=>{const n=t.querySelector(`.value-wrap .${e} .value`);n&&(i=parseInt(i)||0,r?.thousands&&r?.separator?i=i.toLocaleString("en-US").replaceAll(",",r?.separator):r?.thousands&&(i=i.toLocaleString("en-US")),n.innerText=i)};e.addEventListener("input",(function(c){const l=parseInt(c.target.value)||0,o=e.classList.contains("min")?"lower":"upper";s(o,l),((e,s)=>{const c=t.querySelector(".slider-track");if(c){if(!Array.isArray(r.currentValue)||r.currentValue.length<2)return;let t="lower"===e?s:r.currentValue[0],l="lower"===e?r.currentValue[1]:s;t>=l&&(t=l),l<=t&&(l=t);let o=parseInt(a.getAttribute("min")||0),u=parseInt(n.getAttribute("max")||0);o===u&&(u=o+1),t<o&&(t=o),l>u&&(l=u);const d=(t-o)/(u-o)*100,f=(l-o)/(u-o)*100;if(!isNaN(d)&&!isNaN(f)){const e=f-d;c.style.visibility=e<=2?"hidden":"visible",i?c.style.right=`${d}%`:c.style.left=`${d}%`,c.style.width=`${e}%`}}})(o,l)})),e.addEventListener("change",(function(i){const n=e.classList.contains("min")?"lower":"upper";let a="lower"===n?e.value:t.querySelector('input.min[type="range"]').value||0,c="upper"===n?e.value:t.querySelector('input.max[type="range"]').value||0;a=parseInt(a),c=parseInt(c),a>c&&("lower"===n?(a=c,e.value=a):(c=a,e.value=c)),(a<r.min||a>r.max)&&(e.value=a),s(n,e.value);const l=t.querySelector('input.min[type="number"]');l&&(l.value=a);const o=t.querySelector('input.max[type="number"]');o&&(o.value=c),"lower"===n?l.dispatchEvent(new Event("change")):o.dispatchEvent(new Event("change"))}))}});function bricksRangeSliderUI(){bricksRangeSliderUIFn.run()}const bricksCheckboxFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-checkbox[data-brx-filter] input",frontEndOnly:!0,eachElement:e=>{const t=e.closest("[data-brx-filter]")||!1;if(!t)return;const r=Object.values(window.bricksData.filterInstances).find((e=>e.filterElement===t))||!1;if(!r)return;const i=r?.targetQueryId||!1,n=r?.filterMethod||"ajax",a=r?.filterApplyOn||"change",s=r?.autoCheck||!1,c=r?.hierarchy||!1;i&&"ajax"===n&&e.addEventListener("change",(function(t){const n=t.target.value,l=[...r.currentValue]||[],o=l.indexOf(n);let u=[];const d=e=>{const t=e.closest("li")||!1;t&&(e.checked&&t.classList.add("brx-option-active"),e.checked||t.classList.remove("brx-option-active"));const r=e.closest("label")||!1;r&&(e.checked&&r.classList.add("brx-option-active"),e.checked||r.classList.remove("brx-option-active"));const i=e.nextElementSibling||!1;i&&(e.checked&&i.classList.add("brx-option-active"),e.checked||i.classList.remove("brx-option-active"))};if(s&&c){let e=t.target.closest("li[data-depth]")||!1;if(e){let t=parseInt(e.dataset.depth)||0,r=e.nextElementSibling||!1;for(;r;){if((parseInt(r.dataset.depth)||0)<=t)break;let e=r.querySelector('input[type="checkbox"]');e&&u.push(e),r=r.nextElementSibling||!1}}}if(!t.target.checked&&o>-1&&o>-1&&(l.splice(o,1),s&&c&&u.length&&u.forEach((e=>{e.checked=!1,d(e);const t=e.value,r=l.indexOf(t);r>-1&&l.splice(r,1)}))),t.target.checked&&-1===o&&(l.push(n),s&&c&&u.length&&u.forEach((e=>{e.checked=!0,d(e);const t=e.value;-1===l.indexOf(t)&&l.push(t)}))),r.currentValue=[...l],r.filterElement.name=e.name,d(e),"change"!==a)return;window.bricksData.queryLoopInstances[i]&&(bricksUtils.updateSelectedFilters(i,r),bricksUtils.fetchFilterResults(i))}))}});function bricksCheckboxFilter(){bricksCheckboxFilterFn.run()}const bricksDatePickerFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-datepicker[data-brx-filter]",frontEndOnly:!0,eachElement:e=>{const t=Object.values(window.bricksData.filterInstances).find((t=>t.filterElement===e))||!1;if(!t)return;const r=t?.targetQueryId||!1,i=t?.filterMethod||"ajax",n=t?.filterApplyOn||"change";if(r&&"ajax"===i){let i=e.dataset?.bricksDatepickerOptions||!1;i&&(t.datepicker&&t.datepicker.destroy(),i=JSON.parse(i),i.disableMobile=!0,i.onReady=(t,r,i)=>{const n=e.getAttribute("aria-label")||"Date";i.altInput.setAttribute("aria-label",n),e.id&&(i.altInput.setAttribute("id",e.id),e.removeAttribute("id"))},i.onChange=(e,i,a)=>{const s=a.config.mode;a.config.enableTime;if("single"===s){if(!Array.isArray(e)||1!==e.length)return}else if("range"===s&&(!Array.isArray(e)||2!==e.length))return;const c=i.split(t.datepicker?.l10n?.rangeSeparator||" - ");let l=[];c.forEach(((e,r)=>{let i=t.datepicker.parseDate(e,t.datepicker.config.altFormat),n=i.getMonth()+1,a=i.getDate(),s=i.getFullYear();if(n<10&&(n="0"+n),a<10&&(a="0"+a),l[r]=`${s}-${n}-${a}`,t.datepicker.config.enableTime){let e=i.getHours(),t=i.getMinutes();e<10&&(e="0"+e),t<10&&(t="0"+t),l[r]+=` ${e}:${t}`}}));let o=l.join(",");if(o===t.currentValue)return;if(t.currentValue=o,"change"!==n)return;window.bricksData.queryLoopInstances[r]&&(bricksUtils.updateSelectedFilters(r,t),bricksUtils.fetchFilterResults(r))},t.datepicker=flatpickr(e,i))}}});function bricksDatePickerFilter(){bricksDatePickerFilterFn.run()}const bricksActiveFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-active-filters[data-brx-filter] [data-filter-id]",frontEndOnly:!0,eachElement:e=>{const t=e.closest("[data-brx-filter]")||!1;if(!t)return;const r=Object.values(window.bricksData.filterInstances).find((e=>e.filterElement===t))||!1;if(!r)return;const i=r?.targetQueryId||!1,n=r?.filterMethod||"ajax";if(!i)return;const a=e.dataset.filterId||!1,s=e.dataset.filterValue||!1,c=e.dataset.filterUrlParam||"";a&&"ajax"===n&&e.addEventListener("click",(function(e){const t=Object.values(window.bricksData.filterInstances).find((e=>e.filterId===a||""!==c&&c===e.filterNiceName&&s==e.currentValue&&i===e.targetQueryId))||!1;t&&(bricksUtils.resetFilterValue(t,s),bricksUtils.updateSelectedFilters(i,t),bricksUtils.fetchFilterResults(i))}))}});function bricksActiveFilter(){bricksActiveFilterFn.run()}const bricksResetFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-submit[type='reset'][data-brx-filter]",frontEndOnly:!0,eachElement:e=>{const t=Object.values(window.bricksData.filterInstances).find((t=>t.filterElement===e))||!1;if(!t)return;const r=t?.targetQueryId||!1;r&&"ajax"===(t?.filterMethod||"ajax")&&e.addEventListener("click",(function(e){const i=Object.values(window.bricksData.filterInstances).filter((e=>e.targetQueryId===r)),n=window.bricksData.queryLoopInstances[r]||!1;i.length&&(i.forEach((e=>{bricksUtils.resetFilterValue(e)})),n?.isLiveSearch?bricksUtils.hideLiveSearchWrapper(r):(bricksUtils.updateSelectedFilters(r,t),bricksUtils.fetchFilterResults(r)))}))}});function bricksResetFilter(){bricksResetFilterFn.run()}const bricksApplyFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-submit[type='submit'][data-brx-filter]",frontEndOnly:!0,eachElement:e=>{const t=Object.values(window.bricksData.filterInstances).find((t=>t.filterElement===e))||!1;if(!t)return;const r=t?.targetQueryId||!1,i=t?.filterMethod||"ajax",n=t?.redirectTo||!1,a=t?.newTab||!1;r&&"ajax"===i&&e.addEventListener("click",(function(e){if(window.bricksData.queryLoopInstances[r]||!1)if(bricksUtils.updateSelectedFilters(r,t),n){let e=bricksUtils.buildFilterUrlParams(r),t=e?`${n}?${e}`:n;a?window.open(`${t}`,"_blank"):window.location.href=t}else bricksUtils.fetchFilterResults(r)}))}});function bricksApplyFilter(){bricksApplyFilterFn.run()}const bricksPaginationFilterFn=new BricksFunction({parentNode:document,selector:".brxe-pagination[data-brx-filter] a",frontEndOnly:!0,eachElement:e=>{const t=e.closest("[data-brx-filter]")||!1;if(!t)return;const r=Object.values(window.bricksData.filterInstances).find((e=>e.filterElement===t))||!1;if(!r)return;const i=r?.targetQueryId||!1,n=r?.filterMethod||"ajax";let a=bricksUtils.getFiltersForQuery(r.targetQueryId);if(a=a.filter((e=>"pagination"!==e.filterType)),!a.length)return void t.removeAttribute("data-brx-filter");"ajax"===n&&e.addEventListener("click",(function(e){e.preventDefault();const t=e.currentTarget;if(!(window.bricksData.queryLoopInstances[i]||!1))return;const n=t.href||!1;if(!n)return;let a=bricksUtils.getPageNumberFromUrl(n);if(parseInt(a)<1)return;((e,t)=>{const r=Object.values(window.bricksData.filterInstances).filter((t=>t.targetQueryId===e&&"pagination"===t.filterType));r.length&&r.forEach((e=>{e.currentValue=t}))})(i,a);let s=new URL(t.href);s.search="",bricksUtils.updateSelectedFilters(i,r,s),bricksUtils.fetchFilterResults(i)}))}});function bricksPaginationFilter(){bricksPaginationFilterFn.run()}const bricksFiltersA11yHandlerFn=new BricksFunction({parentNode:document,selector:"span.brx-option-text[tabindex]",frontEndOnly:!0,eachElement:e=>{const t=e.previousElementSibling||!1;t&&"INPUT"===t.tagName&&e.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click())}))}});function bricksFiltersA11yHandler(){bricksFiltersA11yHandlerFn.run()}function bricksLiveSearchWrappersInit(){document.addEventListener("bricks/ajax/start",(function(e){const t=e.detail.queryId||!1,r=e.detail?.isPopState||!1;if(!t||r)return;const i=window.bricksData.queryLoopInstances[t]||!1;i?.isLiveSearch&&bricksUtils.showLiveSearchWrapper(t)})),document.addEventListener("click",(e=>{const t=e.target;bricksUtils.currentPageTargetQueryIds().forEach((e=>{if(Object.values(window.bricksData.filterInstances).filter((r=>r.targetQueryId===e&&r.filterElement===t)).length)return;const r=t.closest("[data-brx-ls-wrapper]");r?.dataset?.brxLsWrapper!==e&&(t.classList.contains("icon")||bricksUtils.hideLiveSearchWrapper(e))}))}))}function bricksDisableFiltersOnLoad(){document.addEventListener("bricks/ajax/start",(function(e){const t=e.detail.queryId||!1;if(!t)return;if(!(window.bricksData.queryLoopInstances[t]||!1))return;const r=Object.values(window.bricksData.filterInstances).filter((e=>e.targetQueryId===t));r.length&&r.forEach((e=>{if("search"===e.filterType)return;const t=e.filterElement??!1;t&&(t.disabled=!0,t.classList.add("brx-filter-disabled"),t.querySelectorAll("input").forEach((e=>{e.disabled=!0})))}))})),document.addEventListener("bricks/ajax/end",(function(e){const t=e.detail.queryId||!1;if(!t)return;if(!(window.bricksData.queryLoopInstances[t]||!1))return;const r=Object.values(window.bricksData.filterInstances).filter((e=>e.targetQueryId===t));r.length&&r.forEach((e=>{const t=e.filterElement??!1;t&&(t.disabled=!1,t.classList.remove("brx-filter-disabled"),t.querySelectorAll("input").forEach((e=>{e.disabled=!1})))}))}))}function bricksInitBrowserState(){if(!bricksIsFrontend)return;let e={};bricksUtils.currentPageTargetQueryIds().forEach((t=>{e[t]={},bricksUtils.getFiltersForQuery(t).forEach((r=>{e[t][r.filterId]=r.currentValue}))}));let t=window.bricksData.selectedFilters;window.history.replaceState({isBricksFilter:!0,targetQueryId:"",selectedFilters:t,instancesValue:e},"",window.location.href)}function bricksBrowserHistorySupport(){bricksIsFrontend&&("scrollRestoration"in history&&(history.scrollRestoration="manual"),window.addEventListener("popstate",(function(e){if(e.state&&e.state.isBricksFilter){const t=e.state.targetQueryId||!1,r=e.state.selectedFilters||[],i=e.state.instancesValue||[];if(window.bricksData.selectedFilters=r,Object.keys(i).length&&Object.keys(i).forEach((e=>{Object.keys(i[e]).forEach((t=>{window.bricksData.filterInstances[t]&&(window.bricksData.filterInstances[t].currentValue=i[e][t])}))})),t)bricksUtils.fetchFilterResults(t,!0);else{bricksUtils.currentPageTargetQueryIds().forEach((e=>{bricksUtils.fetchFilterResults(e,!0)}))}}})))}function bricksSearchValueUpdater(){document.addEventListener("bricks/ajax/query_result/displayed",(function(e){const t=e.detail.queryId||!1;if(!t)return;const r=bricksUtils.getFiltersForQuery(t).filter((e=>"search"===e.filterType));r.length>0&&r.forEach((e=>{const r=e.filterElement,i=e.currentValue;r.value!==i&&(r.value=i,bricksUtils.updateLiveSearchTerm(t,i))}))}))}function bricksRestoreFocusOnFilter(){let e={elementId:!1,input:!1};document.addEventListener("focusin",(t=>{const r=t.target,i=r.closest("[data-brx-filter]");if(i){const t=Object.values(window.bricksData.filterInstances).find((e=>e.filterElement===i));t&&(e.elementId=t.filterId,"range"===t.filterType?e.input=r:e.input=r.parentElement?.querySelector("input")||!1)}})),document.addEventListener("bricks/ajax/query_result/displayed",(function(t){if(e.elementId&&e.input){const t=Object.values(window.bricksData.filterInstances).find((t=>t.filterId===e.elementId));if(t&&t.filterElement){const r=t.filterElement,i=r.querySelectorAll("input"),n=Array.from(i).find((t=>t.name===e.input.name&&t.value===e.input.value));if(n){let e=n.parentElement.querySelector("[tabindex]")||!1;if(e?e.focus():n.focus(),"range"===t.filterType&&"INPUT"===n.tagName&&"range"===n.type){if(!Array.isArray(t.currentValue)||t.currentValue.length<2)return;if(t.currentValue[0]!==t.currentValue[1])return;n.style.zIndex=3;let e=n.classList.contains("min")?"max":"min",i=r.querySelector(`input.${e}[type='range']`);i&&(i.style.zIndex=2)}}}}}))}function bricksFilterOptionsInteractions(){const e=e=>{const t=Object.values(window.bricksData.filterInstances).filter((t=>!("initial"!==e&&t.targetQueryId!==e||"active-filters"!==t.filterType&&"checkbox"!==t.filterType&&"datepicker"!==t.filterType&&"search"!==t.filterType&&"select"!==t.filterType&&"radio"!==t.filterType&&"range"!==t.filterType)));if(!t.length)return;const r={"bricks/filter/option/notempty":[],"bricks/filter/option/empty":[]};t.forEach((e=>{if(!e.filterElement||!e.filterId||!e.filterType)return;let t;switch(e.filterType){case"active-filters":t=e.filterElement.innerHTML;break;case"datepicker":t=e.currentValue;break;case"range":e.min==e.currentValue[0]&&e.max==e.currentValue[1]||(t=1);break;case"search":t=e.filterElement.value;break;case"select":t=e.filterElement.querySelectorAll(":scope > option")?.length;break;default:t=e.filterElement.querySelectorAll(":scope > li")?.length}t?r["bricks/filter/option/notempty"].push(e.filterId):r["bricks/filter/option/empty"].push(e.filterId)})),Object.keys(r).forEach((e=>{const t=new CustomEvent(e,{detail:{filterElementIds:r[e]}});document.dispatchEvent(t)}))};document.addEventListener("bricks/ajax/query_result/displayed",(function(t){const r=t.detail.queryId||!1;r&&e(r)})),e("initial")}document.addEventListener("DOMContentLoaded",(function(e){bricksFilters(),bricksLiveSearchWrappersInit(),bricksSearchFilter(),bricksSearchValueUpdater(),bricksSelectFilter(),bricksResetFilter(),bricksApplyFilter(),bricksPaginationFilter(),bricksRadioFilter(),bricksRangeFilter(),bricksRangeValueUpdater(),bricksRangeSliderUI(),bricksCheckboxFilter(),bricksDatePickerFilter(),bricksActiveFilter(),bricksDisableFiltersOnLoad(),bricksInitBrowserState(),bricksBrowserHistorySupport(),bricksFiltersA11yHandler(),bricksRestoreFocusOnFilter(),bricksFilterOptionsInteractions()}));
